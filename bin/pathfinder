#!/usr/bin/env ruby

require 'bundler/setup'

require_relative '../lib/pathfinder'

if ARGV.first.nil?
  puts "USAGE: #{File.basename $0} path/to/wkt"
  exit 1
end

begin
  topology = Pathfinder::Topology.new(ARGV.first).read
  graph = Pathfinder::Graph.from_topology(topology)
  pathfinder = Pathfinder.new(graph)
  pathfinder.reduce

  puts graph
rescue java.io.FileNotFoundException => e
  puts "ERROR: #{e}"
  exit 2
end

